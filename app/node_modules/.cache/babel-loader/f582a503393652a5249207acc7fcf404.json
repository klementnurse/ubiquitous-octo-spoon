{"ast":null,"code":"import _objectSpread from \"/Users/matthew/Desktop/optizmo/webapp/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/matthew/Desktop/optizmo/webapp/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/matthew/Desktop/optizmo/webapp/app/src/contexts/AppContext.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar AppContext = /*#__PURE__*/React.createContext(undefined);\n/**\n * Global state for the app, containing data required to display the opt-out page\n * and process an opt-out.\n */\n\nvar AppContextProvider = function AppContextProvider(_ref) {\n  _s();\n\n  var children = _ref.children,\n      _ref$initialState = _ref.initialState,\n      initialState = _ref$initialState === void 0 ? {} : _ref$initialState,\n      _ref$override = _ref.override,\n      override = _ref$override === void 0 ? {} : _ref$override;\n\n  var _useState = useState(initialState.campaignMailer),\n      _useState2 = _slicedToArray(_useState, 2),\n      campaignMailer = _useState2[0],\n      setCampaignMailer = _useState2[1];\n\n  var _useState3 = useState(initialState.pageData),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pageData = _useState4[0],\n      setPageData = _useState4[1];\n\n  var setCampaignMailerMemo = useCallback(function (newCampaignMailer) {\n    return setCampaignMailer(newCampaignMailer);\n  }, []);\n  var setPageDataMemo = useCallback(function (newPageData) {\n    return setPageData(newPageData);\n  }, []);\n\n  var value = _objectSpread({\n    campaignMailer: campaignMailer,\n    pageData: pageData,\n    setCampaignMailer: setCampaignMailerMemo,\n    setPageData: setPageDataMemo\n  }, override);\n\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 10\n  }, _this);\n};\n\n_s(AppContextProvider, \"o4OKaCi0HCfrlvYy840cNV1x5/8=\");\n\n_c = AppContextProvider;\nexport var useAppContext = function useAppContext() {\n  _s2();\n\n  var context = React.useContext(AppContext);\n\n  if (context === undefined) {\n    throw new Error('useAppContext must be used within a AppContextProvider.');\n  }\n\n  return context;\n};\n\n_s2(useAppContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport default AppContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppContextProvider\");","map":{"version":3,"sources":["/Users/matthew/Desktop/optizmo/webapp/app/src/contexts/AppContext.tsx"],"names":["React","useCallback","useState","AppContext","createContext","undefined","AppContextProvider","children","initialState","override","campaignMailer","setCampaignMailer","pageData","setPageData","setCampaignMailerMemo","newCampaignMailer","setPageDataMemo","newPageData","value","useAppContext","context","useContext","Error"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAA2BC,WAA3B,EAAwCC,QAAxC,QAAwD,OAAxD;;AA+BA,IAAMC,UAAU,gBAAGH,KAAK,CAACI,aAAN,CAAiDC,SAAjD,CAAnB;AAEA;AACA;AACA;AACA;;AACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,OAgBrB;AAAA;;AAAA,MAfJC,QAeI,QAfJA,QAeI;AAAA,+BAdJC,YAcI;AAAA,MAdJA,YAcI,kCAdW,EAcX;AAAA,2BAbJC,QAaI;AAAA,MAbJA,QAaI,8BAbO,EAaP;;AACJ,kBAA4CP,QAAQ,CAElDM,YAAY,CAACE,cAFqC,CAApD;AAAA;AAAA,MAAOA,cAAP;AAAA,MAAuBC,iBAAvB;;AAGA,mBAAgCT,QAAQ,CACtCM,YAAY,CAACI,QADyB,CAAxC;AAAA;AAAA,MAAOA,QAAP;AAAA,MAAiBC,WAAjB;;AAIA,MAAMC,qBAAqB,GAAGb,WAAW,CACvC,UAAAc,iBAAiB;AAAA,WAAIJ,iBAAiB,CAACI,iBAAD,CAArB;AAAA,GADsB,EAEvC,EAFuC,CAAzC;AAKA,MAAMC,eAAe,GAAGf,WAAW,CACjC,UAAAgB,WAAW;AAAA,WAAIJ,WAAW,CAACI,WAAD,CAAf;AAAA,GADsB,EAEjC,EAFiC,CAAnC;;AAKA,MAAMC,KAAsB;AAC1BR,IAAAA,cAAc,EAAdA,cAD0B;AAE1BE,IAAAA,QAAQ,EAARA,QAF0B;AAG1BD,IAAAA,iBAAiB,EAAEG,qBAHO;AAI1BD,IAAAA,WAAW,EAAEG;AAJa,KAKvBP,QALuB,CAA5B;;AAQA,sBAAO,QAAC,UAAD,CAAY,QAAZ;AAAqB,IAAA,KAAK,EAAES,KAA5B;AAAA,cAAoCX;AAApC;AAAA;AAAA;AAAA;AAAA,WAAP;AACD,CA3CD;;GAAMD,kB;;KAAAA,kB;AA6CN,OAAO,IAAMa,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA;;AACjC,MAAMC,OAAO,GAAGpB,KAAK,CAACqB,UAAN,CAAiBlB,UAAjB,CAAhB;;AAEA,MAAIiB,OAAO,KAAKf,SAAhB,EAA2B;AACzB,UAAM,IAAIiB,KAAJ,CAAU,yDAAV,CAAN;AACD;;AAED,SAAOF,OAAP;AACD,CARM;;IAAMD,a;;AAUb,eAAeb,kBAAf","sourcesContent":["import React, { ReactNode, useCallback, useState } from 'react'\nimport { CampaignMailer, PageData } from '../contracts'\n\nexport interface AppContextState {\n  /**\n   * \"Campaign Mailer\" result of fetching opt-out key details. Not just a \"Campaign Mailer\",\n   * also Opt-Out redirection details, client information, etc.\n   */\n  campaignMailer?: CampaignMailer\n\n  /**\n   * Customisation of the content + styling for the landing and confirmation pages.\n   */\n  pageData?: PageData\n\n  /**\n   * Set the \"Campaign Mailer\".\n   */\n  setCampaignMailer(newCampaignMailer: CampaignMailer): void\n\n  /**\n   * Set the page customisation.\n   */\n  setPageData(newPageData: PageData): void\n}\n\nexport type AppContextInitialState = Pick<\n  AppContextState,\n  'campaignMailer' | 'pageData'\n>\n\nconst AppContext = React.createContext<AppContextState | undefined>(undefined)\n\n/**\n * Global state for the app, containing data required to display the opt-out page\n * and process an opt-out.\n */\nconst AppContextProvider = ({\n  children,\n  initialState = {},\n  override = {}\n}: {\n  children: ReactNode\n\n  /**\n   * Populate the state with initial data.\n   */\n  initialState?: Partial<AppContextInitialState>\n\n  /**\n   * Override the context value, useful for testing.\n   */\n  override?: Partial<AppContextState>\n}) => {\n  const [campaignMailer, setCampaignMailer] = useState<\n    CampaignMailer | undefined\n  >(initialState.campaignMailer)\n  const [pageData, setPageData] = useState<PageData | undefined>(\n    initialState.pageData\n  )\n\n  const setCampaignMailerMemo = useCallback(\n    newCampaignMailer => setCampaignMailer(newCampaignMailer),\n    []\n  )\n\n  const setPageDataMemo = useCallback(\n    newPageData => setPageData(newPageData),\n    []\n  )\n\n  const value: AppContextState = {\n    campaignMailer,\n    pageData,\n    setCampaignMailer: setCampaignMailerMemo,\n    setPageData: setPageDataMemo,\n    ...override\n  }\n\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>\n}\n\nexport const useAppContext = () => {\n  const context = React.useContext(AppContext)\n\n  if (context === undefined) {\n    throw new Error('useAppContext must be used within a AppContextProvider.')\n  }\n\n  return context\n}\n\nexport default AppContextProvider\n"]},"metadata":{},"sourceType":"module"}